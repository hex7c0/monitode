"use strict";function monitode(a){var b=__dirname+"/min/",c=[],d=a||Object.create(null),e=global.monitode={min:b,output:Boolean(d.output),tickle:Boolean(d.tickle),app:!1,os:Boolean(d.os),monitor:{os:!0,log:!0}};d.app&&(e.app={_router:{stack:d.app._router.stack}}),e.os&&(global.monitode.net={inn:{pacs:0,errs:0},out:{pacs:0,errs:0}},global.monitode.io={tps:0,mbs:0}),d.http=d.http||Object.create(null),(d.http.enabled===!1?1:0)||(e.http={port:Number(d.http.port)||3e4,user:String(d.http.user||"admin"),password:String(d.http.password||"password"),agent:String(d.http.agent||""),realm:String(d.http.realm||"Monitode"),file:d.http.file,hash:d.http.hash,dir:String(d.http.dir||__dirname+"/public/")},c.push(require(b+"module/web.js"))),d.https=d.https||Object.create(null),d.https.key&&d.https.cert&&(e.https={key:resolve(String(d.https.key)),cert:resolve(String(d.https.cert)),port:Number(d.https.port)||30003,user:String(d.https.user||"admin"),password:String(d.https.password||"password"),agent:String(d.https.agent||""),realm:String(d.https.realm||"Monitode"),file:d.https.file,hash:d.https.hash,dir:String(d.https.dir||__dirname+"/public/")},c.push(require(b+"module/webs.js"))),d.logger=d.logger||Object.create(null),e.logger=Object.create(null),d.logger.file&&(e.logger={file:resolve(String(d.logger.file)),timeout:1e3*(parseFloat(d.logger.timeout)||5)},c.push(require(b+"module/file.js"))),d.logger.log&&(e.logger.log=resolve(String(d.logger.log)),global.monitode.log={counter:0,size:0},global.monitode.event=Object.create(null)),d.db=d.db||Object.create(null),(d.db.mongo||d.db.couch)&&(e.db={database:String(d.db.database||"monitode"),timeout:1e3*(parseFloat(d.db.timeout)||20)},(e.db.mongo=d.db.mongo)&&c.push(require(b+"module/mongodb.js")),(e.db.couch=d.db.couch)&&c.push(require(b+"module/couchdb.js"))),d.mail=d.mail||Object.create(null),d.mail.provider&&(e.mail={provider:String(d.mail.provider),user:String(d.mail.user||"admin"),password:String(d.mail.password||"password"),to:Array.isArray(d.mail.to)===!0?d.mail.to:[],subject:String(d.mail.subject||"monitode report"),timeout:1e3*(parseFloat(d.mail.timeout)||60)},c.push(require(b+"module/mail.js"))),d.status=d.status||Object.create(null),Boolean(d.status.enabled)&&(e.status={site:Array.isArray(d.status.site)===!0?d.status.site:[],port:Array.isArray(d.status.port)===!0?d.status.port:[],method:String(d.status.method||"GET"),agent:String(d.status.agent||"monitode crawl"),file:resolve(String(d.status.file||"status")),timeout:1e3*(parseFloat(d.status.timeout)||120)},c.push(require(b+"module/status.js")));for(var f=0,g=c.length;g>f;f++)c[f]();return function(a,b,c){return c?c():null}}try{var resolve=require("path").resolve}catch(MODULE_NOT_FOUND){console.error(MODULE_NOT_FOUND),process.exit(1)}module.exports=monitode;
