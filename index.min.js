/*
 * monitode v2.4.6
 * (c) hex7c0 https://hex7c0.github.io/monitode/
 * Licensed under GPLv3
 */
"use strict";try{var resolve=require("path").resolve}catch(MODULE_NOT_FOUND){console.error(MODULE_NOT_FOUND),process.exit(1)}module.exports=function(a){var b=__dirname+"/min/",c=[];a=a||Object.create(null);var d=GLOBAL.monitode={min:b,output:Boolean(a.output),tickle:Boolean(a.tickle),app:!1,os:Boolean(a.os),monitor:{os:!0,log:!0}};a.app&&(d.app={_router:{stack:a.app._router.stack}}),d.os&&(GLOBAL.monitode.net={inn:{pacs:0,errs:0},out:{pacs:0,errs:0}},GLOBAL.monitode.io={tps:0,mbs:0}),a.http=a.http||Object.create(null),(0==a.http.enabled?1:0)||(d.http={port:Number(a.http.port)||3e4,user:String(a.http.user||"admin"),password:String(a.http.password||"password"),agent:String(a.http.agent||""),realm:String(a.http.realm||"Monitode"),file:a.http.file,hash:a.http.hash,dir:String(a.http.dir||__dirname+"/public/")},c.push(require(b+"module/web.js"))),a.https=a.https||Object.create(null),a.https.key&&a.https.cert&&(d.https={key:resolve(String(a.https.key)),cert:resolve(String(a.https.cert)),port:Number(a.https.port)||30003,user:String(a.https.user||"admin"),password:String(a.https.password||"password"),agent:String(a.https.agent||""),realm:String(a.https.realm||"Monitode"),file:a.https.file,hash:a.https.hash,dir:String(a.https.dir||__dirname+"/public/")},c.push(require(b+"module/webs.js"))),a.logger=a.logger||Object.create(null),d.logger=Object.create(null),a.logger.file&&(d.logger={file:resolve(String(a.logger.file)),timeout:1e3*(parseFloat(a.logger.timeout)||5)},c.push(require(b+"module/file.js"))),a.logger.log&&(d.logger.log=resolve(String(a.logger.log)),GLOBAL.monitode.log={counter:0,size:0},GLOBAL.monitode.event=Object.create(null)),a.db=a.db||Object.create(null),(a.db.mongo||a.db.couch)&&(d.db={mongo:a.db.mongo,couch:a.db.couch,database:String(a.db.database||"monitode"),timeout:1e3*(parseFloat(a.db.timeout)||20)},d.db.mongo&&c.push(require(b+"module/mongodb.js")),d.db.couch&&c.push(require(b+"module/couchdb.js"))),a.mail=a.mail||Object.create(null),a.mail.provider&&(d.mail={provider:String(a.mail.provider),user:String(a.mail.user||"admin"),password:String(a.mail.password||"password"),to:1==Array.isArray(a.mail.to)?a.mail.to:[],subject:String(a.mail.subject||"monitode report"),timeout:1e3*(parseFloat(a.mail.timeout)||60)},c.push(require(b+"module/mail.js"))),a.status=a.status||Object.create(null),Boolean(a.status.enabled)&&(d.status={site:1==Array.isArray(a.status.site)?a.status.site:[],port:1==Array.isArray(a.status.port)?a.status.port:[],method:String(a.status.method||"GET"),agent:String(a.status.agent||"monitode crawl"),file:resolve(String(a.status.file||"status")),timeout:1e3*(parseFloat(a.status.timeout)||120)},c.push(require(b+"module/status.js")));for(var e=0,f=c.length;f>e;e++)c[e]();return function(a,b,c){try{return c()}catch(d){return}}};
