/*
 * monitode v2.4.0
 * (c) hex7c0 https://hex7c0.github.io/monitode/
 * Licensed under GPLv3
 */
"use strict";function dyna(a,b,c){function d(){a({method:"POST",url:"/dyn/"}).success(function(d){store.x.push(new Date(d.date)),store.one.push(d.cpu.one),store.five.push(d.cpu.five),store.fifteen.push(d.cpu.fifteen),store.total.push(d.mem.total/1024),store.used.push(d.mem.used/1024);var e=d.mem.total-d.mem.used;store.v8rss.push(d.mem.v8.rss/1024),store.v8total.push(d.mem.v8.total/1024),store.v8used.push(d.mem.v8.used/1024);var f=store.x;if(avg.load({columns:[f,store.one,store.five,store.fifteen]}),meml.load({columns:[f,store.total,store.used,store.v8rss,store.v8total,store.v8used]}),memp.load({columns:[["used",d.mem.used],["free",e]]}),d.net&&(store.inet.push(d.net.inn.pacs),store.onet.push(d.net.out.pacs),store.tps.push(d.io.tps),store.mbs.push(d.io.mbs),os||loadOs(),os.load({columns:[f,store.inet,store.onet,store.tps,store.mbs]})),0==cpus.length)b.cpus=cpus=d.cpu.cpus,loadProc(b.cpus);else for(var g=0,h=d.cpu.cpus.length;h>g;g++){var i=d.cpu.cpus[g];cpus[g].load({columns:[["user",i.times.user],["nice",i.times.nice],["sys",i.times.sys],["idle",i.times.idle],["irq",i.times.irq]]})}if(b.dynamics=[{title:"Ajax lag",info:Date.now()-d.date+" milliseconds"},{title:"System lag",info:d.ns/1e6+" milliseconds"},{title:"System uptime",info:Math.floor(d.uptime.os/60)+" minutes"},{title:"System uptime Node",info:Math.floor(d.uptime.node/60)+" minutes"}],d.tickle){var j={title:"Request counter"},k=[];for(var l in d.tickle)k.push({title:l,info:d.tickle[l]});j.child=k,b.dynamics.push(j)}b.refresh=[];var j={title:"Logger",child:[]},k=[];for(var l in d.log)k.push({title:l,info:d.log[l]});try{d.log.counter?j.child=k:j.info="disabled",b.refresh[0]=j}catch(m){}if(d.event){var j={title:"Logger story event",child:[]},k=store.logger;for(var n in d.event){flag=!0;var o=d.event[n];for(var p in o){var q=o[p];for(var r in q){var s=q[r];k.push({title:n,info:p+" "+r+" * "+s.counter})}}}flag&&(j.child=k,b.refresh[1]=j)}return dyna(a,b,c)}).error(function(){alert("server doesn't respond")})}c.cancel(promise),b.clock>0?promise=c(d,1e3*b.clock):0==b.clock&&(b.clock=5,d())}function stat(a,b){a({method:"POST",url:"/sta/"}).success(function(a){b.statics=[{title:"CPU architecture",info:a.os.arch},{title:"OS hostname",info:a.os.hostname},{title:"OS platform",info:a.os.platform},{title:"OS type",info:a.os.type},{title:"OS release",info:a.os.release},{title:"OS endianness",info:a.endianness},{title:"Process gid",info:a.process.gid},{title:"Process uid",info:a.process.uid},{title:"Process pid",info:a.process.pid}];var c={title:"Process environment"},d=[];for(var e in a.process.env)d.push({title:e,info:a.process.env[e]});c.child=d,b.statics.push(c);var c={title:"Network interfaces"},d=[];for(var e in a.network)for(var f in a.network[e]){var g=a.network[e][f];g.internal||d.push({title:e+" ("+g.family+")",info:g.address})}c.child=d,b.statics.push(c);var c={title:"Node version"},d=[];for(var e in a.version)d.push({title:e,info:a.version[e]});if(c.child=d,b.statics.push(c),a.route){var c={title:"Sitemap"},d=[];for(var e in a.route)d.push({title:e,info:a.route[e]});c.child=d,b.statics.push(c)}}).error(function(){})}var promise=null,flag=!1;