/*
 * monitode v2.4.0
 * (c) hex7c0 https://hex7c0.github.io/monitode/
 * Licensed under GPLv3
 */
"use strict";function load(){avg=c3.generate({bindto:"#average",data:{type:"line",x:"x",columns:[store.x,store.one,store.five,store.fifteen],names:{one:"average in 1 min",five:"average in 5 min",fifteen:"average in 15 min"},colors:{one:"#107aff",five:"#00a855",fifteen:"#ff9900"}},size:{height:400},grid:{y:{lines:[{value:1,text:"overload"}]}},axis:{x:{type:"timeseries",label:"time",localtime:!1,tick:{count:5,format:"/%d %H:%M:%S"}},y:{label:"load average",tick:{format:d3.format(",")}}}}),meml=c3.generate({bindto:"#memory_lin",data:{type:"bar",types:{total:"area",used:"spline",v8total:"line"},groups:[["v8rss","v8used"]],x:"x",columns:[store.x,store.total,store.used,store.v8rss,store.v8total,store.v8used],names:{total:"total memory",used:"memory used"},colors:{used:"red",total:"gray"}},size:{height:400},axis:{x:{type:"timeseries",label:"time",localtime:!1,tick:{count:5,format:"/%d %H:%M:%S"}},y:{label:"kilobytes"}}}),memp=c3.generate({bindto:"#memory_pie",data:{type:"pie",columns:[["used",0],["free",100]],names:{used:"memory used",free:"memory free"},colors:{used:"red",free:"orange"}},size:{height:250}})}function loadProc(a){for(var b=a,c=0;c<b.length;c++)cpus[c]=c3.generate({bindto:"#cpu_"+c,data:{type:"donut",columns:[["user",b[c].times.user],["nice",b[c].times.nice],["sys",b[c].times.sys],["idle",b[c].times.idle],["irq",b[c].times.irq]],colors:{user:"#107aff",idle:"#00a855",sys:"#ff9900"}},donut:{title:"CPU "+(c+1)},legend:{show:!1},size:{height:280,width:280},padding:{top:0,right:0,bottom:0,left:0}})}function loadOs(){os=c3.generate({bindto:"#os",data:{type:"spline",x:"x",columns:[store.x,store.inet,store.onet,store.tps,store.mbs],names:{inet:"input packets",onet:"output packets",tps:"transfers/s",mbs:"MB/s"},colors:{inet:"red",onet:"blue",tps:"green",mbs:"purple"}},axis:{x:{type:"timeseries",label:"time",localtime:!1,tick:{count:5,format:"/%d %H:%M:%S"}}}})}function controller(a,b,c){a.clock=0,dyna(b,a,c),stat(b,a),a.button=function(d){switch(d){case"dynamic":dyna(b,a,c);break;case"static":stat(b,a);break;case"stop":c.cancel(promise);break;case"csv":var e="data:text/csv;charset=utf-8,";e+="date,average 1 min,average 5 min,average 15 min,memory used\n";for(var f=1;f<store.x.length;f++)e+=store.x[f]+",",e+=store.one[f]+",",e+=store.five[f]+",",e+=store.fifteen[f]+",",e+=store.used[f]+"\n";window.open(encodeURI(e));break;case"clear":var g=store.x.length;for(var h in store)store[h].splice(1,g);store.logger=[]}}}var avg=null,meml=null,memp=null,os=null,cpus=[],app=angular.module("monitode",[]),store={x:["x"],one:["one"],five:["five"],fifteen:["fifteen"],total:["total"],used:["used"],v8rss:["v8rss"],v8total:["v8total"],v8used:["v8used"],inet:["inet"],onet:["onet"],tps:["tps"],mbs:["mbs"],logger:[]};load(),app.controller("main",controller);